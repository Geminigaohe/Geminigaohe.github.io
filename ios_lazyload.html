<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="Keywords" content="blog"/>
    <meta name="Description" content="blog"/>
    <title>Simple</title>
    <link rel="shortcut icon" href="/static/favicon.png"/>
    <link rel="stylesheet" type="text/css" href="/main.css" />
</head>
<body>
<div class="main">
    <div class="header">
    	<ul id="pages">
            <li><a href="/">home</a></li>
            <li><a href="/#/tags">tags</a></li>
            <li><a href="/#/archive">archive</a></li>
    	</ul>
    </div>
	<div class="wrap-header">
	<h1>
    <a href="/" id="title"></a>
	</h1>
	</div>
<div id="md" style="display: none;">
<!-- markdown -->
>iOS 设备内存极其有限, 即使现在, 程序员也要想办法降低程序对内存的使用, 当然越低越好.

"懒加载: 也称为延迟加载, 即在需要的时候才加载." 举个例子:

首先声明一个属性:

~~~~{c}
@interface myView : UIView

@property (nonatomic, strong) UILabel *myLabel; //声明一个 myLabel 属性

@end
~~~~

懒加载的写法就是这样:

~~~~{c}
- (UILabel *)myLabel {
    if (!_myLabel) {
        _myLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
        _myLabel.text = @"label";
        _myLabel.textColor = [UIColor blueColor];
    }
    return _mylabel;
}
~~~~
 
不难看出, 这就是给自己的实例变量写了一个新的的 `getter` 方法 (替换了系统提供的 `getter` 方法), 如何调用 `getter` 方法? **使用点语法即可, 因为 OC 的点语法实际上是向对象发送消息.**

~~~~{c}
- (void) viewDidLoad {
    [super viewDidLoad];
    [self addSubView: self.myLabel]; // self.myLabel == [self mylabel];
}
~~~~

## 如何 "懒" 了??

逐句翻译一下:

~~~~{c}
// 重写了myLabel 的 getter 方法
- (UILabel *)myLabel {
    if (!_myLabel) { // 如果没有创建 _myLabel 就进行实例化再返回
        _myLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
        _myLabel.text = @"label";
        _myLabel.textColor = [UIColor blueColor];
    }
    return _mylabel; // 反之, 直接返回 _myLabel
}
~~~~

这是思路: "需要实例变量, 没有创建, 就创建后加载; 需要实例变量, 已经创建, 直接加载, 不需要时不进行加载".  

## 还有更常见的做法

### 填充

<!-- markdown end -->
</div>
<div class="entry" id="main">
<!-- content -->
<blockquote>
  <p>iOS 设备内存极其有限, 即使现在, 程序员也要想办法降低程序对内存的使用, 当然越低越好.</p>
</blockquote>

<p>"懒加载: 也称为延迟加载, 即在需要的时候才加载." 举个例子:</p>

<p>首先声明一个属性:</p>

<pre class=" language-c"><code class=" language-c">@interface <span class="token class-name">myView</span> <span class="token punctuation">:</span> UIView

@property <span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span> strong<span class="token punctuation">)</span> UILabel <span class="token operator">*</span>myLabel<span class="token punctuation">;</span><span class="token comment" spellcheck="true"> //声明一个 myLabel 属性
</span>
@end
</code></pre>

<p>懒加载的写法就是这样:</p>

<pre class=" language-c"><code class=" language-c"><span class="token operator">-</span> <span class="token punctuation">(</span>UILabel <span class="token operator">*</span><span class="token punctuation">)</span>myLabel <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_myLabel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _myLabel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UILabel alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token function">CGRectMake<span class="token punctuation">(</span></span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        _myLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"label"</span><span class="token punctuation">;</span>
        _myLabel<span class="token punctuation">.</span>textColor <span class="token operator">=</span> <span class="token punctuation">[</span>UIColor blueColor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _mylabel<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 

<p>不难看出, 这就是给自己的实例变量写了一个新的的 <code>getter</code> 方法 (替换了系统提供的 <code>getter</code> 方法), 如何调用 <code>getter</code> 方法? <strong>使用点语法即可, 因为 OC 的点语法实际上是向对象发送消息.</strong></p>

<pre class=" language-c"><code class=" language-c"><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> viewDidLoad <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>super viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>self addSubView<span class="token punctuation">:</span> self<span class="token punctuation">.</span>myLabel<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"> // self.myLabel == [self mylabel];
</span><span class="token punctuation">}</span>
</code></pre>

<h2 id="">如何 "懒" 了??</h2>

<p>逐句翻译一下:</p>

<pre class=" language-c"><code class=" language-c"><span class="token comment" spellcheck="true">// 重写了myLabel 的 getter 方法
</span><span class="token operator">-</span> <span class="token punctuation">(</span>UILabel <span class="token operator">*</span><span class="token punctuation">)</span>myLabel <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_myLabel<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true"> // 如果没有创建 _myLabel 就进行实例化再返回
</span>        _myLabel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UILabel alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token function">CGRectMake<span class="token punctuation">(</span></span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        _myLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> @<span class="token string">"label"</span><span class="token punctuation">;</span>
        _myLabel<span class="token punctuation">.</span>textColor <span class="token operator">=</span> <span class="token punctuation">[</span>UIColor blueColor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> _mylabel<span class="token punctuation">;</span><span class="token comment" spellcheck="true"> // 反之, 直接返回 _myLabel
</span><span class="token punctuation">}</span>
</code></pre>

<p>这是思路: "需要实例变量, 没有创建, 就创建后加载; 需要实例变量, 已经创建, 直接加载, 不需要时不进行加载".  </p>

<h2 id="">还有更常见的做法</h2>

<h3 id="">填充</h3>
<!-- content end -->
</div>
<br>
<br>
    <div id="disqus_thread"></div>
	<div class="footer">
		<p>© Copyright 2014 by isnowfy, Designed by isnowfy</p>
	</div>
</div>
<script src="main.js"></script>
<script id="content" type="text/mustache">
    <h1>{{title}}</h1>
    <div class="tag">
    {{date}}
    {{#tags}}
    <a href="/#/tag/{{name}}">#{{name}}</a>
    {{/tags}}
    </div>
</script>
<script id="pagesTemplate" type="text/mustache">
    {{#pages}}
    <li>
        <a href="{{path}}">{{title}}</a>
    </li>
    {{/pages}}
</script>
<script>
$(document).ready(function() {
    $.ajax({
        url: "main.json",
        type: "GET",
        dataType: "json",
        success: function(data) {
            $("#title").html(data.name);
            var pagesTemplate = Hogan.compile($("#pagesTemplate").html());
            var pagesHtml = pagesTemplate.render({"pages": data.pages});
            $("#pages").append(pagesHtml);
            //path
            var path = "ios_lazyload.html";
            //path end
            var now = 0;
            for (var i = 0; i < data.posts.length; ++i)
                if (path == data.posts[i].path)
                    now = i;
            var post = data.posts[now];
            var tmp = post.tags.split(" ");
            var tags = [];
            for (var i = 0; i < tmp.length; ++i)
                if (tmp[i].length > 0)
                    tags.push({"name": tmp[i]});
            var contentTemplate = Hogan.compile($("#content").html());
            var contentHtml = contentTemplate.render({"title": post.title, "tags": tags, "date": post.date});
            $("#main").prepend(contentHtml);
            if (data.disqus_shortname.length > 0) {
                var disqus_shortname = data.disqus_shortname;
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            }
        }
    });
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ["\\(", "\\)"]], processEscapes: true}});
</script>
</body>
</html>
